# Agent-OS Integration for Agent-LightningKernel-level safety during AI agent training.## Overview[Agent-OS](https://github.com/imran-siddique/agent-os) provides deterministic governancefor AI agents. This integration enables:- **0% unpenalized policy violations** ΓÇö All unsafe actions are detected and penalized- **Policy violations ΓåÆ RL penalties** ΓÇö Agents learn to avoid unsafe behavior- **Complete audit trail** ΓÇö From training to production## Installation```bashpip install agentlightning agent-os```## Quick Start```pythonfrom agentlightning import Trainerfrom agentlightning.contrib.runner.agentos import AgentOSRunnerfrom agentlightning.contrib.reward.agentos import PolicyRewardfrom agent_os import KernelSpacefrom agent_os.policies import SQLPolicy# Create governed kernelkernel = KernelSpace(policy=SQLPolicy(    deny=["DROP", "DELETE"]))# Wrap in Agent-OS runnerrunner = AgentOSRunner(kernel)# Train with policy-aware rewardstrainer = Trainer(    runner=runner,    reward_fn=PolicyReward(kernel),    algorithm="GRPO")trainer.train()```## Components### AgentOSRunnerWraps agent execution with kernel-level policy enforcement:```pythonfrom agentlightning.contrib.runner.agentos import AgentOSRunnerrunner = AgentOSRunner(    kernel,    fail_on_violation=False,  # Continue but penalize    emit_violations=True,     # Emit as spans)```### PolicyRewardConverts policy violations to negative RL rewards:```pythonfrom agentlightning.contrib.reward.agentos import PolicyRewardreward_fn = PolicyReward(    kernel,    base_reward_fn=accuracy_reward,    critical_penalty=-100.0,    clean_bonus=5.0,)```### FlightRecorderAdapterImports Agent-OS audit logs to LightningStore:```pythonfrom agentlightning.contrib.adapter.agentos import FlightRecorderAdapteradapter = FlightRecorderAdapter(flight_recorder)adapter.import_to_store(lightning_store)```## Benchmarks| Metric | Without Agent-OS | With Agent-OS ||--------|------------------|---------------|| Undetected Policy Violations | 12.3% | **0.0%** || Task Accuracy | 76.4% | **79.2%** |*Note: "0% undetected violations" means all policy violations are caught and penalized, not that agents never attempt unsafe actions. Over training, agents learn to minimize violation attempts.*## Documentation- [Agent-OS Documentation](https://imran-siddique.github.io/agent-os-docs/)- Integration guide: see project README or examples in this directory.## LicenseMIT